开发环境


支持的操作系统Windows、MacOS、Linux
gcc-arm-none-eabi交叉编译环境，版本6 [Windows] [MacOS] [Linux]

目标配置文件在config目录，从best2300_tws或best2300_tws_enc复制到新目标名，然后修改
make T=best2300_tws_enc -j4针对指定目标编译
编译后文件是out/best2300_tws_enc/best2300_tws_enc.bin



下载

下载工具目前只有 [windows] 版本，下载软件是 pyqt4 写的，pyinstaller 打包，可以解出来py文件，有时间自己改改应该能在MacOS和Linux用，参数设置方法如下图
首先点击bin path config按钮，弹出登陆对话框，用户和密码都是1

![tu1]{"https://git.aitekapp.com/zhijie/best2300_tws_master_anc/uploads/80f80bc2eb3ab777ae180e7e1b4e963e/login.png"}



![图1](https://git.aitekapp.com/zhijie/best2300_tws_master_anc/uploads/80f80bc2eb3ab777ae180e7e1b4e963e/login.png)



参数参照下图设置

![图2](https://git.aitekapp.com/zhijie/best2300_tws_master_anc/uploads/79171c2ad682f3cd0e29f88c68bfb6c5/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2018-12-06_%E4%B8%8A%E5%8D%889.48.51.png)

需要USB转TTL串口(3.3V电平)来下载，BES2300开发板已自带，插上USB即可，首先需要选择串口，如下图，COM1为系统主板自带，不要选中，COM5为USB-->TTL，选中，保存

![图3](https://git.aitekapp.com/zhijie/best2300_tws_master_anc/uploads/c319947ee540d4725c94c5082abe3054/port_config.png)

点击Start All按钮，界面变成如下图示

![图4](https://git.aitekapp.com/zhijie/best2300_tws_master_anc/uploads/8639bc200239916301027b1f06e9f0cc/start.png)



再短按BES2300开发板POWERKEY，开始下载

![图5](https://git.aitekapp.com/zhijie/best2300_tws_master_anc/uploads/2ebd6cbd5836bac2509e5d51368430eb/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2018-12-28_%E4%B8%8B%E5%8D%888.34.46.png)

下载成功

![图6](https://git.aitekapp.com/zhijie/best2300_tws_master_anc/uploads/29e7a9c189cdf24580b477593c26440a/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2018-12-28_%E4%B8%8B%E5%8D%888.28.59.png)

点击Stop All按钮，回到起始界面

![图7](https://git.aitekapp.com/zhijie/best2300_tws_master_anc/uploads/8b1f07131e0560664a442718605f5d0b/stop.png)

下载结束后，需要重新插拔USB，让开发板重新上电，新固件才能启动
开机有两种模式，长按至蓝灯开始闪烁松开，进入自动连接模式，自动和已配对的手机连接；持续长按至红蓝灯交替闪烁松开，进入配对模式，手机可以搜索耳机开发板并绑定连接。另，已开机松开按钮后，再长按则关机。
下载编译固件若为TWS使能模式，由于TWS为左右声道各一个芯片模组及一个耳机，因此此时开发板仅一个耳机出声，这是正常的。
查看Trace信息同样使用USB转TTL串口(3.3V电平)，参数设置为921600,8N1，MacOS和Linux下可用picocom或minicom(MacOs homebrew版自带可能有问题，不支持921600速率)